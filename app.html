<!DOCTYPE html>
<html>
  <head>
    <title>NYT Word Occurrence Grapher</title>
    <style>
      html, body, {
        position:fixed;
        overflow: hidden;
        top:0;
        bottom:0;
        left:0;
        right:0;
        margin: 0;
      }
      body {
        display: flex;
        margin: 0px;
        padding: 0px;
        height: 100%;
        background: #e74c3c;
        font-family: 'Georgia', serif;
      }
      .wrapper {
            width:300px;
            margin:3% auto;
      }

      .dropdown dd {
            display: block;
            position: absolute;
            left: 113%;
            top: -2.8em;
      }

      .dropdown dd, .dropdown dt, .dropdown ul {
            margin: 0px;
            padding: 0px;
      }

      .dropdown dt a span {
            cursor: pointer;
            display: block;
            padding: 5px;
            white-space: nowrap;
      }
      .dropdown dt a img {
            position: relative;
            z-index: 1;
      }
      .dropdown dt a span span {
            display: inline-block;
            padding: 0;
      }

      .dropdown dd {
            position: relative;
      }
      .dropdown a, .dropdown a:visited {
            color: #4a535f;
            text-decoration: none;
            outline: none;
      }
      .dropdown a:hover {
            color: #5d4617;
      }
      .dropdown dt a:hover, .dropdown dt a:focus {
            color: #5d4617;
      }
      .dropdown dt a {
            position: relative;
            background: #e3e6ef;
            display: block;
            padding-right: 20px;
            overflow: hidden;
            border:1px solid #ed4267;
            width:250px;
      }
      .dropdown dt a:after {
            content: '';
            background: #ed4267;
            position: absolute;
            
            height: 32px;
          position: absolute;
          right: 0;
          top: 0;
          width: 35px;
      }

      .dropdown dt a:before {
          background: none repeat scroll 0 0 #FFFFFF;
          content: "";
          height: 3px;
          position: absolute;
          right: 7px;
          top: 6px;
          width: 20px;
          z-index: 2;
            box-shadow:0 8px 0 #FFFFFF, 0 16px 0 #FFFFFF;
      }
      .dropdown dd ul {
            background: #f0f2f7;
            
            color: #C5C0B0;
            display: none;
            left: 0px;
            padding: 5px 0px;
            position: absolute;
            
            width: 270px;
            border:1px solid #ed4267;
            list-style: none;
            max-height: 170px;
            overflow-y: scroll;
            top:10px;
            z-index: 2;
      }

      li a {
            font-size:13px;
      }

      li a span {
          line-height: 2em;
      }
      .dropdown dd ul::-webkit-scrollbar-track {
       -webkit-box-shadow: inset 0 0 1px rgba(0,0,0,0.3);
       border-left:1px solid rgba(0,0,0,0.1);
      }
      .dropdown dd ul::-webkit-scrollbar-thumb {
       background: rgba(0,0,0,0.4);
      /*-webkit-box-shadow: inset 0 0 1px rgba(0,0,0,0.5), 1px 0 0 #5cace9 inset, 2px 0 0 #b3d5ee inset;
          border-radius:10px;*/
      }
      .dropdown dd ul::-webkit-scrollbar-thumb:window-inactive {
       background: blue;
      }
      .dropdown span.value {
            display: none;
      }
      .dropdown dd ul li a {
            padding: 5px;
            display: block;
            font-size: 12px !important;
      }
      .dropdown dd ul li a:hover {
            background-color: rgba(0,0,0,0.05);
      }
      dl.dropdown {
            display: inline-block;
            width: 240px;
            margin: -3px 0 0 1px;
      }

      dl.dropdown > span {
            overflow: hidden;
            white-space: nowrap;
            display: inline-block;
      }

      dl.dropdown dt span {
            color: rgba(0, 0, 0, 0.6);
          font-size: 14px;
          font-weight: bold;
          line-height: 1.6em;
      }

      .split {
        height: 100%;
        width: 50%;
        position: fixed;
        z-index: 1;
        top: 0;
        overflow-x: hidden;
      }

      /* Control the left side */
      .left {
        left: 0;
      }

      /* Control the right side */
      .right {
        right: 0;
        background-color: white;
      }

      /* If you want the content centered horizontally and vertically */
      .centered {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }

      h1 {
        color: #33342D;
        font-size: 500%;
        font-weight: normal;
        margin-bottom: 0em;
      }

      h2 {
        font-size: 200%;
        font-weight: normal;
        margin-bottom: 0em;
      }

      .loader {
        position: absolute;
        width: 95%;
        height: 100%;
        color: rgba(0,0,0,.2);
      }

      #myChart {
        display: none;
      }

      .loader span {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
      }
      .loader span:nth-child(1) {
        transform: rotate(0deg);
      }
      .loader span:nth-child(2) {
        transform: rotate(90deg);
      }
      .loader span:nth-child(3) {
        transform: rotate(180deg);
      }
      .loader span:nth-child(4) {
        transform: rotate(270deg);
      }
      .loader span:before {
        content: '';
        position: absolute;
        display: block;
        top: 0;
        left: 0;
        width: 100%;
        height: 10px;
        background: #000;
        transform: scaleX(0);
        animation: animate 2s linear infinite;
      }
      .loader span:nth-child(1):before {
        animation-delay: 0s;
      }
      .loader span:nth-child(2):before {
        animation-delay: 0.5s;
      }
      .loader span:nth-child(3):before {
        animation-delay: 1s;
      }
      .loader span:nth-child(4):before {
        animation-delay: 1.5s;
      }

      @keyframes animate {
        0%
        {
          transform: scaleX(0);
          transform-origin: left;
        }
        25%
        {
          transform: scaleX(1);
          transform-origin: left;
        }
        25.00001%
        {
          transform-origin: right;
        }
        50%, 100%
        {
          transform: scaleX(0);
          transform-origin: right;
        }
      }

    </style>
  </head>
  <body>
    <script src="/modules/JQuery/src/jquery-3.5.1.js"></script>
    <script>

      $(document).ready(function() {

          $(".dropdown dt a").click(function() {
              var id = $(this).closest('dl').attr('id');
              if ($(".dropdown#" + id + " dd ul").is(":visible")) {
                $(".dropdown dd ul").hide();
              } else {
                $(".dropdown dd ul").hide();
                $(".dropdown#" + id + " dd ul").toggle();
              }
          });

          $(".dropdown dd ul li a").click(function() {
              //console.log($(this).html())
              var text = $(this).html();
              var id = $(this).closest('dl').attr('id');
              $(".dropdown#" + id + " dt a span").html(text);
              $(".dropdown#" + id + " dd ul").hide();
          });

          $(document).bind('click', function(e) {
              var $clicked = $(e.target);
              if (! $clicked.parents().hasClass("dropdown"))
                  var id = $clicked.closest('dl').attr('id');
                  $(".dropdown#" + id + " dd ul").hide();
          });

      });
    </script>
    <div class="split left">
      <h1>Congratulations</h1>
      <div class="wrapper">
        <dl id="year-select" class="dropdown">
            <dt><a href="javascript:void(0);"><span><span>2019</span></span></a></dt>
            <dd>
              <ul style="display: none;">
                <li><a href="javascript:void(0);"><span>2018</span></a></li>
                <li><a href="javascript:void(0);"><span>2017</span><span></span></a></li>
                <li><a href="javascript:void(0);"><span>2016</span></a></li>
                <li><a href="javascript:void(0);"><span>2015</span></a></li>
                <li><a href="javascript:void(0);"><span>2014</span></a></li>
                <li><a href="javascript:void(0);"><span>2013</span></a></li>
                <li><a href="javascript:void(0);"><span>2012</span></a></li>
                <li><a href="javascript:void(0);"><span>2011</span></a></li>
                <li><a href="javascript:void(0);"><span>2010</span></a></li>
                <li><a href="javascript:void(0);"><span>2009</span></a></li>
                <li><a href="javascript:void(0);"><span>2008</span></a></li>
                <li><a href="javascript:void(0);"><span>2007</span></a></li>
                <li><a href="javascript:void(0);"><span>2006</span></a></li>
                <li><a href="javascript:void(0);"><span>2005</span></a></li>
                <li><a href="javascript:void(0);"><span>2004</span></a></li>
                <li><a href="javascript:void(0);"><span>2003</span></a></li>
                <li><a href="javascript:void(0);"><span>2002</span></a></li>
                <li><a href="javascript:void(0);"><span>2001</span></a></li>
                <li><a href="javascript:void(0);"><span>2000</span></a></li>
                <li><a href="javascript:void(0);"><span>1999</span></a></li>
                <li><a href="javascript:void(0);"><span>1998</span></a></li>
                <li><a href="javascript:void(0);"><span>1997</span></a></li>
                <li><a href="javascript:void(0);"><span>1996</span></a></li>
                <li><a href="javascript:void(0);"><span>1995</span></a></li>
                <li><a href="javascript:void(0);"><span>1994</span></a></li>
                <li><a href="javascript:void(0);"><span>1993</span></a></li>
                <li><a href="javascript:void(0);"><span>1992</span></a></li>
              </ul>
            </dd>
        </dl>
      </div>
      <div class="wrapper">
        <dl id="month-select" class="dropdown">
            <dt><a href="javascript:void(0);"><span><span>1</span></span></a></dt>
            <dd>
              <ul style="display: none;">
                <li><a href="javascript:void(0);"><span>1</span></a></li>
                <li><a href="javascript:void(0);"><span>2</span></a></li>
                <li><a href="javascript:void(0);"><span>3</span></a></li>
                <li><a href="javascript:void(0);"><span>4</span></a></li>
                <li><a href="javascript:void(0);"><span>5</span></a></li>
                <li><a href="javascript:void(0);"><span>6</span></a></li>
                <li><a href="javascript:void(0);"><span>7</span></a></li>
                <li><a href="javascript:void(0);"><span>8</span></a></li>
                <li><a href="javascript:void(0);"><span>9</span></a></li>
                <li><a href="javascript:void(0);"><span>10</span></a></li>
                <li><a href="javascript:void(0);"><span>11</span></a></li>
                <li><a href="javascript:void(0);"><span>12</span></a></li>
              </ul>
            </dd>
        </dl>
      </div>
      <div class="wrapper">
        <dl id="sampling-select" class="dropdown">
            <dt><a href="javascript:void(0);"><span><span>1</span></span></a></dt>
            <dd>
              <ul style="display: none;">
                <li><a href="javascript:void(0);"><span>1</span></a></li>
                <li><a href="javascript:void(0);"><span>5</span></a></li>
                <li><a href="javascript:void(0);"><span>10</span></a></li>
              </ul>
            </dd>
        </dl>
      </div>
      <p>Your first AWS Elastic Beanstalk Node.js application is now running on your own dedicated environment in the AWS Cloud</p>
      <p>This environment is launched with Elastic Beanstalk Node.js Platform</p>
      <p id="buttonOutput"></p>
      <button type="button" onclick="runSearch()">Click</button>
      <script>
        function runSearch() { 
          $(".loader span").show();
          $("button").hide();
          $("#myChart").hide();
          var year = $("#year-select dt").text();
          var month = $("#month-select dt").text();
          var sampling = $("#sampling-select dt").text();
          var url = "/nytArchive/" + year + "/" + month + "/" + sampling;
          console.log(url);
          window.location.replace(url);
        }
      </script>
    </div>

    <div class="split right">
      <div class="loader">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <canvas id="myChart" width="100%" height="90%"></canvas>
      </div>

        
      <script src="/modules/chart.js/dist/Chart.js"></script>
      <script>
        if ($('#myChart').css('display') === 'block') {
          var ctx = document.getElementById('myChart');
          var labels = $('#myChart').data('words');
          var data = $('#myChart').data('counts');

          var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: labels,
              datasets: [{
                label: '# of ocurrences',
                data: data
                }]
              },
            options: {
              scales: {
                xAxes: [{
                  ticks: {
                    fontSize: 15
                  }
                }],
                yAxes: [{
                  ticks: {
                    beginAtZero: true
                  }
                }]
              }
            }
          });
        }
      </script>

    </div>

  </body>
</html>